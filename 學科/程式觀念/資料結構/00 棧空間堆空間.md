---
tags: 棧空間 堆空間
aliase: [stack, heap]
created: 2023-01-04 18:30
modified: 星期四 5日 一月 2023 07:31:22
---
# 棧空間(Stack)
- 主要用於儲存**函式調用**和**本地變量**。
	- 自動分配參數和本地變量，返回時自動釋放
		- 按照**先進後出**的方式分配
>這些數據結構可以在程序的不同部分之間共享和交換信息，使程序的代碼更加高效。
>使得程序的代碼更加簡潔，並減少了程序執行時的記憶體管理工作
	
- 遞迴調用和循環。
	- 每當函式調用時，就會在棧頂上分配一個新的區域，而在函数返回時就會釋放這個區域。
	- 可以輕鬆地實現遞迴調用和循環
>棧空間的大小是有限的，因此如果程序中存在**遞迴調用**或其他形式的循環，則可能會耗盡棧空間

# 堆空間(Heap)

- 存儲動態分配的變量的區域。
	- 手動分配、釋放
	- 儲存程序的大型數據結構，例如物件和陣列。
***

# 靜態記憶體分配 static memory allocation
>[!note]+
>- 速度快
>	- 程序執行期間不需要進行任何額外的記憶體分配操作
>- 效率高、穩定
>	- 程序執行不會進行記憶體分配和釋放動作，減少記憶體管理帶來的複雜度
>- 用於棧空間


- 由**編譯器分配**的記憶體
	>編譯時確定記憶體位址和大小，執行時不做改變
	>程式開始前、編譯時分配完成，不佔用CPU資源
- 資料被分配到程序的**靜態區**（static area）中。
	>靜態區通常位於程序的內存中，且在執行期間不改變。
	>EX:基本型別，陣列
- **自動釋放**所佔用的記憶體空間
	>靜態區中變數使用完畢時，系統會回收空間

# 動態記憶體分配 dynamic memory allocation
>[!note]+
>- 靈活，避免浪費
>	- 根據實際需要來動態地分配和釋放記憶體
>- 用於堆空間

- **執行時**分配記憶體
>記憶體的大小和位址在程序執行時確定

# 差異性

|分配|時間|位址|記憶體大小|穩定性|
|----|----|----|----|----|
|動態|執行時|堆空間|使用者決定|低|
|靜態|編譯時|靜態、全局變數區域|編譯前決定|高|

***

### code section 代碼區
>[!info]+
>函數代碼區
>- 用於儲存程序中函數的二進制代碼的區域。
>- 函式編譯完後被放入
>	- 當函數調用時，就會將函數的代碼從函數代碼區載入到處理器的指令暫存器中，然後由處理器執行

>程序執行期間，記憶體中存在許多不同的區域
其中一個區域稱為函數代碼區（function code section）。
- 通常位於程序的靜態區（static area）中
- 程序執行期間不會改變
- 通常，函數代碼區中的代碼會被處理器緩存在內存中，以提高函數調用的效率

>不同的程序語言和硬體平台對於函數代碼區的管理方式略有不同
[詳細資料-wiki](https://zh.wikipedia.org/zh-tw/%E4%BB%A3%E7%A0%81%E6%AE%B5)





